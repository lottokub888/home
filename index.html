<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>แพลตฟอร์มสลากกินแบ่ง (อัปเกรดตาราง)</title>
  <style>
body{font-family:'Segoe UI',sans-serif;margin:0;background:#f7f7fb;color:#222}
header{background:linear-gradient(90deg,#b91c1c,#ef4444);color:#fff;padding:1.2rem}
nav a{color:#fff;margin-right:1rem;text-decoration:none;font-weight:600}
.container{max-width:900px;margin:auto;padding:1.5rem}
.card{background:#fff;border-radius:20px;padding:1.8rem;box-shadow:0 10px 25px rgba(0,0,0,.08);margin-bottom:1.5rem}
h1,h2,h3{margin-top:0}
button{cursor:pointer;border:none;outline:none}
button.primary{background:#b91c1c;color:#fff;border-radius:12px;padding:.9rem 1.8rem;font-size:1rem;font-weight:600}
button.secondary{background:#22c55e;color:#fff;border-radius:12px;padding:.7rem 1.4rem;font-size:1rem;font-weight:600}
button.ghost{background:#e5e7eb;color:#111;border-radius:12px;padding:.7rem 1.4rem;font-size:1rem;font-weight:600}
.tabs{display:flex;gap:10px;margin-bottom:1rem}
.tab{flex:1;padding:.8rem;border-radius:999px;background:#e5e7eb;font-weight:600;text-align:center}
.tab.active{background:#ef4444;color:#fff}
.summary{margin-top:1.2rem;padding:1rem;background:#fef2f2;border-radius:14px;font-weight:600;white-space:pre-line}

/* modal */
.modal{position:fixed;inset:0;background:rgba(0,0,0,.4);display:none;align-items:center;justify-content:center;z-index:100}
.modal-box{background:#fff;border-radius:20px;padding:1.6rem;max-width:550px;width:90%;max-height:80vh;overflow:auto}
.num-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(60px,1fr));gap:8px;margin-top:1rem}
.num{background:#e5e7eb;border-radius:10px;padding:.8rem;text-align:center;font-weight:600;cursor:pointer;transition:.2s}
.num:hover{background:#d1d5db}
.num.selected{background:#22c55e;color:#fff}
  </style>
</head>
<body>

<header>
  <nav class="container">
    <a href="#home">หน้าแรก</a>
    <a href="#buy">ซื้อเลข</a>
  </nav>
</header>

<section id="home" class="container">
  <div class="card">
    <h2>ยินดีต้อนรับสู่แพลตฟอร์มสลาก</h2>
    <p>กรุณาไปที่หน้า “ซื้อเลข” เพื่อเลือกสลากที่ต้องการ</p>
  </div>
</section>

<section id="buy" class="container">
  <div class="card">
    <h2>เลือกซื้อเลขสลาก</h2>

    <div class="tabs">
      <div class="tab active" onclick="switchBuyTab('manual',this)">กรอกเอง</div>
      <div class="tab" onclick="switchBuyTab('table',this)">เลือกจากตาราง</div>
    </div>

    <div id="manualSection">
      <h3>กรอกเลขสลาก</h3>
      <input id="manualNum" placeholder="เลข 2 หรือ 3 ตัว">
      <input id="manualQty" type="number" min="1" value="1">
      <button class="secondary" onclick="addManual()">เพิ่มรายการ</button>
    </div>

    <div id="tableSection" style="display:none">
      <h3>เลือกเลขจากตาราง</h3>
      <button class="ghost" onclick="openNumberTable(2)">ตารางเลข 2 ตัว</button>
      <button class="ghost" onclick="openNumberTable(3)">ตารางเลข 3 ตัว</button>
    </div>

    <div class="summary" id="summary">ยังไม่มีรายการ</div>
    <div style="text-align:center;margin-top:1rem">
      <button class="primary" onclick="simulateCheckout()">สรุป & ชำระ (Simulation)</button>
    </div>
  </div>
</section>

<footer class="container" style="text-align:center;color:#666;padding:1.5rem 0">
  © Demo Lottery Platform – ใช้เพื่อการศึกษา
</footer>

<!-- Modal Grid -->
<div id="modal" class="modal" onclick="closeModal(event)">
  <div class="modal-box">
    <h3 id="modalTitle"></h3>
    <div id="modalGrid" class="num-grid"></div>
    <input id="modalQty" type="number" min="1" value="1" placeholder="จำนวนชุด">
    <div style="text-align:center;margin-top:1rem">
      <button class="secondary" onclick="confirmSelection()">เพิ่มจากตาราง</button>
    </div>
  </div>
</div>

<script>
let cart = [];
let selectedNums = [];
let currentTableType = 2;

// สลับแสดงส่วนกรอกเอง / ตาราง
function switchBuyTab(mode, btn){
  document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
  btn.classList.add('active');

  document.getElementById('manualSection').style.display = mode==='manual'?'block':'none';
  document.getElementById('tableSection').style.display = mode==='table'?'block':'none';
}

// เพิ่มแบบกรอกเอง
function addManual(){
  const num = document.getElementById('manualNum').value.trim();
  const qty = +document.getElementById('manualQty').value;
  if (!/^\d{2,3}$/.test(num) || qty < 1){
    alert('กรุณากรอกเลขให้ถูกต้อง (2 หรือ 3 ตัว) และจำนวนให้ถูกต้อง');
    return;
  }
  cart.push({num,qty});
  updateSummary();
  document.getElementById('manualNum').value='';
}

// เปิด modal ตาราง
function openNumberTable(type){
  currentTableType = type;
  selectedNums = [];

  document.getElementById('modalTitle').innerText = `ตารางเลข ${type} ตัว`;
  const grid = document.getElementById('modalGrid');
  grid.innerHTML = '';

  const max = type===2 ? 100 : 1000;
  for (let i=0; i < max; i++){
    const n = String(i).padStart(type, '0');
    const div = document.createElement('div');
    div.className = 'num';
    div.innerText = n;
    div.onclick = ()=>{
      if (div.classList.contains('selected')){
        div.classList.remove('selected');
        selectedNums = selectedNums.filter(x=>x!==n);
      } else {
        div.classList.add('selected');
        selectedNums.push(n);
      }
    };
    grid.appendChild(div);
  }

  document.getElementById('modal').style.display = 'flex';
}

// ยืนยันเลือกจากตาราง
function confirmSelection(){
  const qty = +document.getElementById('modalQty').value;
  if (selectedNums.length === 0 || qty < 1){
    alert('กรุณาเลือกเลขและจำนวนชุด');
    return;
  }
  selectedNums.forEach(n=>{
    cart.push({num:n,qty});
  });
  closeModal();
  updateSummary();
}

// ปิด modal
function closeModal(e){
  if (e.target.id==='modal'){
    document.getElementById('modal').style.display='none';
  }
}

// อัปเดตสรุปรายการ
function updateSummary(){
  if (cart.length === 0){
    document.getElementById('summary').innerText='ยังไม่มีรายการ';
    return;
  }
  let text = '';
  let total=0;
  cart.forEach(item=>{
    const cost = item.qty*100;
    total += cost;
    text += `${item.num} x ${item.qty} = ${cost} บาท\n`;
  });
  text += `\nรวมทั้งหมด: ${total} บาท`;
  document.getElementById('summary').innerText = text;
}

// Simulation checkout
function simulateCheckout(){
  if (cart.length === 0){
    alert('ยังไม่มีรายการ');
    return;
  }
  alert('Simulation: รายการจะถูกส่งเพื่อชำระจริง');
}
</script>
</body>
</html>
